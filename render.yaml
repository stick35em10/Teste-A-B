# Render Configuration File
# Deploy: Teste A/B - An√°lise Estat√≠stica
# Platform: Web Service

version: '1'

services:
  # üéØ Servi√ßo Web Principal (Dashboard)
  - type: web
    name: teste-ab-dashboard
    env: python
    plan: free
    region: ohio
    branch: dev_to_deploy
    
    # Configura√ß√µes do Build
    buildCommand: pip install -r requirements.txt
      
    # Comando de Inicializa√ß√£o (Simplificado)
    startCommand: gunicorn app:app --bind 0.0.0.0:$PORT --workers 1 --timeout 120 #python app.py
    
    # Vari√°veis de Ambiente
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0  # Updated to newer version
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: false
      - key: SECRET_KEY
        generateValue: true
      - key: PYTHONUNBUFFERED
        value: true
    
    # Health Check (Removido se n√£o existir a rota)
    # healthCheckPath: /health
    autoDeploy: true

  # üìà Servi√ßo de Redis (Cache) - Opcional
  - type: redis
    name: teste-ab-cache
    plan: free
    region: ohio
    ipAllowList: []
    maxmemoryPolicy: allkeys-lru
  
    # Otimiza√ß√µes para free tier
    healthCheckPath: /health
    healthCheckTimeout: 30
    autoDeploy: true